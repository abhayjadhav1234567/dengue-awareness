<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Dengue Awareness</title>
<link rel="stylesheet" href="style.css">
<link rel="icon" href="data:,">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://unpkg.com/three@0.146.0/build/three.min.js"></script>
<script src="https://unpkg.com/globe.gl"></script>
</head>
<body>
<header class="site-header">
  <div class="title-wrap">
    <div class="mosquitoes" aria-hidden="true">
      <img src="mosquito.png" class="mosq mosq1">
      <img src="mosquito.png" class="mosq mosq2">
      <img src="mosquito.png" class="mosq mosq3">
    </div>
    <h1 id="siteTitle">Dengue Awareness</h1>
  </div>
  <div class="nav">
    <button data-target="definition">What is Dengue?</button>
    <button data-target="symptoms">Symptoms</button>
    <button data-target="prevention">Prevention</button>
    <button data-target="treatment">Treatment</button>
    <button data-target="visuals">Visuals of Data</button>
  </div>
</header>

<main>
  <section id="definition" class="card"><h2>What is Dengue?</h2>
    <p>Dengue is a mosquito-borne viral infection caused by the bite of the Aedes aegypti mosquito. Severe dengue can be life-threatening.</p>
  </section>

  <section id="symptoms" class="card">
    <h2>Symptoms</h2>
    <ul><li>High fever</li><li>Severe headache</li><li>Muscle and joint pains</li><li>Nausea and vomiting</li><li>Skin rash (2â€“5 days)</li></ul>
  </section>

  <section id="prevention" class="card">
    <h2>Prevention</h2>
    <ul>
      <li>Use mosquito repellents and nets</li>
      <li>Eliminate stagnant water</li>
      <li>Wear protective clothing</li>
      <li>Community awareness</li>
    </ul>
  </section>

  <section id="treatment" class="card">
    <h2>Treatment & Care</h2>
    <p>Consult a doctor immediately if dengue symptoms appear. Avoid self-medication and stay hydrated.</p>
  </section>

  <section id="charts" class="card">
    <h2>Visuals â€” Charts</h2>
    <div class="charts-row">
      <div class="chart-box small"><canvas id="pieChart" width="400" height="300"></canvas></div>
      <div class="chart-box large"><canvas id="barChart" width="600" height="300"></canvas></div>
    </div>
    <div class="line-chart"><canvas id="lineChart" width="1000" height="200"></canvas></div>
    <div class="controls">
      <label for="yearSelect">Select Year:</label>
      <select id="yearSelect"></select>
    </div>
  </section>

  <section id="visuals" class="card">
    <h2>Visuals of Data</h2>
    <canvas id="stars"></canvas>
    <div id="globeViz" style="height:550px;position:relative;z-index:1"></div>
  </section>

  <section id="final" class="card center">
    <button id="endBtn" class="end-btn">DOT</button>
    <div id="goodbye" class="goodbye"><span>ðŸ¦Ÿ Take care of yourself</span></div>
  </section>
</main>

<footer class="site-footer"><p>Â© 2025 Dengue Awareness</p></footer>

<script src="data.js"></script>
<script>
document.querySelectorAll('.nav button').forEach(btn=>{
  btn.addEventListener('click',()=>{
    const id=btn.dataset.target;
    document.getElementById(id).scrollIntoView({behavior:'smooth'});
  });
});

function animateMosquito(sel, speed, rx, ry, phase){
  const el=document.querySelector(sel);
  let t=phase;
  (function step(){
    t+=speed;
    const x=rx*Math.cos(t),y=ry*Math.sin(2*t);
    el.style.transform=`translate(${x}px,${y}px) rotate(${10*Math.sin(3*t)}deg)`;
    requestAnimationFrame(step);
  })();
}
animateMosquito('.mosq1',.01,60,15,0);
animateMosquito('.mosq2',.012,80,20,1.3);
animateMosquito('.mosq3',.009,50,12,2.1);

const stars=document.getElementById('stars');
const ctx=stars.getContext('2d');
function drawStars(){
  stars.width=stars.offsetWidth;stars.height=stars.offsetHeight;
  ctx.fillStyle='black';ctx.fillRect(0,0,stars.width,stars.height);
  for(let i=0;i<400;i++){
    const x=Math.random()*stars.width,y=Math.random()*stars.height;
    const a=Math.random();ctx.fillStyle=`rgba(255,255,255,${.3+.7*a})`;
    ctx.fillRect(x,y,1,1);
  }
}
drawStars();setInterval(drawStars,3000);

const world=Globe()(document.getElementById('globeViz'))
  .globeImageUrl('https://unpkg.com/three-globe/example/img/earth-blue-marble.jpg')
  .backgroundColor('rgba(0,0,0,0)')
  .showAtmosphere(true)
  .atmosphereColor('white')
  .autoRotate(true).autoRotateSpeed(0.2);

fetch('india_states_full.json').then(r=>r.json()).then(g=>{
  const pts=g.features.map(f=>{
    const st=f.properties.name;
    const data=dengueDataAllStates[st]['2025'];
    const color=data.cases>15000?'red':data.cases>8000?'orange':'green';
    return {lat:f.geometry.coordinates[1],lng:f.geometry.coordinates[0],
            size:0.3,color,name:st};
  });
  world.pointsData(pts).pointAltitude('size').pointColor('color')
       .labelsData(pts).labelLat(d=>d.lat).labelLng(d=>d.lng)
       .labelText(d=>d.name).labelSize(0.9).labelColor(()=>"#fff");
});

const endBtn=document.getElementById('endBtn');
const goodbye=document.getElementById('goodbye');
endBtn.addEventListener('click',()=>{
  for(let i=0;i<3;i++){
    const el=document.createElement('img');
    el.src='mosquito.png';
    el.className='mosq fly'+i;
    document.body.appendChild(el);
    setTimeout(()=>el.classList.add('toCenter'),i*300);
    setTimeout(()=>{el.classList.add('fadeout');
    setTimeout(()=>el.remove(),2000);},5000);
  }
  goodbye.classList.add('show');
  setTimeout(()=>goodbye.classList.remove('show'),5500);
});
</script>
</body>
</html>
