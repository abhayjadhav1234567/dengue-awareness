<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Dengue Awareness</title>
<link rel="stylesheet" href="style.css">
<link rel="icon" href="data:,">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<header class="site-header">
  <div class="title-wrap">
    <h1 id="siteTitle">Dengue Awareness</h1>
  </div>
  <div class="nav">
    <button data-target="definition">What is Dengue?</button>
    <button data-target="symptoms">Symptoms</button>
    <button data-target="prevention">Prevention</button>
    <button data-target="treatment">Treatment</button>
    <button data-target="charts">Visuals of Data</button>
  </div>
</header>

<main>
  <section id="definition" class="card">
    <h2>What is Dengue?</h2>
    <p>Dengue is a mosquito-borne viral infection caused by the bite of the Aedes aegypti mosquito. Severe dengue can be life-threatening.</p>
  </section>

  <section id="symptoms" class="card">
    <h2>Symptoms</h2>
    <ul>
      <li>High fever</li>
      <li>Severe headache</li>
      <li>Muscle and joint pains</li>
      <li>Nausea and vomiting</li>
      <li>Skin rash (2–5 days after fever starts)</li>
    </ul>
    <h3>Organs Affected</h3>
    <div class="table-wrap">
      <table class="organs">
        <thead>
          <tr><th>Organ</th><th>Normal Work</th><th>What Dengue Virus Does</th><th>What Problem Happens</th></tr>
        </thead>
        <tbody>
          <tr><td><strong>Liver</strong> 🟠</td><td>Cleans blood, makes proteins for clotting</td><td>Virus inflames liver cells</td><td><strong>Bleeding risk, liver failure</strong></td></tr>
          <tr><td><strong>Bone Marrow</strong> 🔴</td><td>Produces blood cells</td><td>Slows platelet production</td><td><strong>Low platelets → bleeding</strong></td></tr>
          <tr><td><strong>Blood Vessels</strong> 🔵</td><td>Carry blood safely</td><td>Walls become leaky</td><td><strong>Plasma leakage → shock</strong></td></tr>
          <tr><td><strong>Spleen</strong> 🟣</td><td>Filters blood</td><td>Can swell</td><td><strong>Pain, rupture risk</strong></td></tr>
          <tr><td><strong>Brain</strong> 🟡</td><td>Controls functions</td><td>Rare swelling</td><td><strong>Confusion, seizures</strong></td></tr>
          <tr><td><strong>Heart</strong> 💚</td><td>Pumps blood</td><td>May weaken</td><td><strong>Fatigue, chest pain</strong></td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <section id="prevention" class="card">
    <h2>Prevention</h2>
    <ul>
      <li>Use mosquito repellents and nets</li>
      <li>Eliminate stagnant water</li>
      <li>Wear protective clothing</li>
      <li>Community awareness</li>
    </ul>
  </section>

  <section id="treatment" class="card">
    <h2>Treatment & Care</h2>
    <div class="table-wrap">
      <table class="treatment">
        <thead>
          <tr><th>Type</th><th>Treatment Step</th><th>What It Means</th><th>Why It Is Important</th></tr>
        </thead>
        <tbody>
          <tr><td>🏠 <strong>Home Remedies / Self-Care</strong></td><td><strong>Rest & Hydration</strong></td><td>Bed rest, drink water, ORS, juices</td><td>Prevents dehydration</td></tr>
          <tr><td></td><td><strong>Fever Control</strong></td><td>Take <strong>Paracetamol</strong> only</td><td>Avoids bleeding risk</td></tr>
          <tr><td></td><td><strong>Nutrition</strong></td><td>Eat light, healthy food</td><td>Supports recovery</td></tr>
          <tr><td>🏥 <strong>Doctor / Hospital Care</strong></td><td><strong>Regular Blood Tests</strong></td><td>Platelet & hematocrit monitoring</td><td>Detects shock early</td></tr>
          <tr><td></td><td><strong>IV Fluids</strong></td><td>Intravenous hydration</td><td>Maintains pressure</td></tr>
          <tr><td></td><td><strong>Transfusion</strong></td><td>Given only in severe cases</td><td>Saves life</td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <section id="charts" class="card">
    <h2>Visuals — Charts</h2>
    <div class="chart-controls">
      <label for="yearSelect">Select Year:</label>
      <select id="yearSelect"></select>
      <label for="chartType">Chart Type:</label>
      <select id="chartType">
        <option value="doughnut">Doughnut</option>
        <option value="pie">Pie</option>
      </select>
    </div>

    <div class="charts-row">
      <div class="chart-box small">
        <div class="label">📊 Top 10 States by Cases (Selected Year)</div>
        <canvas id="pieChart" height="300"></canvas>
      </div>
      <div class="chart-box large">
        <div class="label">📈 Yearly Dengue Cases Trend (2021–2025)</div>
        <canvas id="barChart" height="300"></canvas>
      </div>
    </div>
    <div class="line-chart">
      <div class="label">⚰️ Dengue Deaths Trend (2021–2025)</div>
      <canvas id="lineChart" height="200"></canvas>
    </div>
  </section>

  <section id="final" class="card center">
    <button id="endBtn" class="end-btn">DOT</button>
    <div id="goodbye" class="goodbye"><span>🦟 Take care of yourself</span></div>
  </section>
</main>

<footer class="site-footer">
  <p>© 2025 Dengue Awareness</p>
</footer>

<script src="data.js"></script>
<script>
document.querySelectorAll('.nav button').forEach(b=>{
  b.addEventListener('click',()=>{
    const t=document.getElementById(b.dataset.target);
    if(t)t.scrollIntoView({behavior:'smooth'});
  });
});

availableYears.forEach(y=>{
  const o=document.createElement('option');
  o.value=y;o.textContent=y;
  document.getElementById('yearSelect').appendChild(o);
});
document.getElementById('yearSelect').value=Math.max(...availableYears);

let pieChart, barChart, lineChart;
function drawAll(year){
  const yearStr=String(year);
  const entries=Object.keys(dengueDataAllStates).map(s=>({
    state:s,
    cases:dengueDataAllStates[s][yearStr].cases,
    deaths:dengueDataAllStates[s][yearStr].deaths
  })).sort((a,b)=>b.cases-a.cases);

  const top10=entries.slice(0,10);
  const labels=top10.map(e=>e.state);
  const vals=top10.map(e=>e.cases);
  const colors=labels.map((_,i)=>`hsl(${i*30},70%,55%)`);

  if(pieChart)pieChart.destroy();
  pieChart=new Chart(pieChart=document.getElementById('pieChart').getContext('2d'),{
    type:document.getElementById('chartType').value,
    data:{labels:labels,datasets:[{data:vals,backgroundColor:colors}]},
    options:{plugins:{legend:{position:'bottom'}}}
  });

  const years=availableYears;
  const sums=years.map(y=>Object.keys(dengueDataAllStates).reduce((a,s)=>a+dengueDataAllStates[s][y].cases,0));
  if(barChart)barChart.destroy();
  barChart=new Chart(barChart=document.getElementById('barChart').getContext('2d'),{
    type:'bar',
    data:{labels:years.map(String),datasets:[{label:'Total Dengue Cases',data:sums,backgroundColor:'rgba(46,204,113,0.7)'}]},
    options:{plugins:{legend:{display:false}}}
  });

  const deaths=years.map(y=>Object.keys(dengueDataAllStates).reduce((a,s)=>a+dengueDataAllStates[s][y].deaths,0));
  if(lineChart)lineChart.destroy();
  lineChart=new Chart(lineChart=document.getElementById('lineChart').getContext('2d'),{
    type:'line',
    data:{labels:years.map(String),datasets:[{data:deaths,borderColor:'#e74c3c',tension:.3}]},
    options:{plugins:{legend:{display:false}}}
  });
}

drawAll(Math.max(...availableYears));
document.getElementById('yearSelect').addEventListener('change',()=>drawAll(yearSelect.value));
document.getElementById('chartType').addEventListener('change',()=>drawAll(yearSelect.value));

document.getElementById('endBtn').addEventListener('click',()=>{
  const bye=document.getElementById('goodbye');
  bye.classList.add('show');
  setTimeout(()=>bye.classList.remove('show'),4000);
});
</script>
</body>
</html>
