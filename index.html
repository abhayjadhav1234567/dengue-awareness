<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Dengue Awareness</title>
<link rel="stylesheet" href="style.css">
<link rel="icon" href="data:,">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<header class="site-header">
  <div class="title-wrap">
    <div class="mosquitoes" aria-hidden="true">
      <img src="mosquito.png.jpg" class="mosq mosq1">
      <img src="mosquito.png.jpg" class="mosq mosq2">
      <img src="mosquito.png.jpg" class="mosq mosq3">
    </div>
    <h1 id="siteTitle">Dengue Awareness</h1>
  </div>
  <div class="nav">
    <button data-target="definition">What is Dengue?</button>
    <button data-target="symptoms">Symptoms</button>
    <button data-target="prevention">Prevention</button>
    <button data-target="treatment">Treatment</button>
    <button data-target="charts">Visuals of Data</button>
  </div>
</header>

<main>
  <section id="definition" class="card">
    <h2>What is Dengue?</h2>
    <p>Dengue is a mosquito-borne viral infection caused by the bite of the <strong>Aedes aegypti</strong> mosquito. Severe dengue can be life-threatening and needs immediate medical care.</p>
  </section>

  <section id="symptoms" class="card">
    <h2>Symptoms</h2>
    <ul>
      <li>High fever</li>
      <li>Severe headache</li>
      <li>Muscle and joint pains</li>
      <li>Nausea and vomiting</li>
      <li>Skin rash (2–5 days after fever starts)</li>
    </ul>

    <h3>Organs Affected by Dengue</h3>
    <div class="table-wrap">
      <table class="organs">
        <thead>
          <tr>
            <th>Organ</th>
            <th>Normal Work</th>
            <th>What Dengue Virus Does</th>
            <th>What Problem Happens</th>
          </tr>
        </thead>
        <tbody>
          <tr><td><strong>Liver</strong> 🟠</td><td>Cleans blood, makes proteins for clotting, helps digestion</td><td>Virus enters liver cells → immune attack → swelling → enzymes leak into blood</td><td>Poor cleaning, less clotting → <strong>bleeding risk, liver failure</strong></td></tr>
          <tr><td><strong>Bone Marrow</strong> 🔴</td><td>Produces blood cells (RBC, WBC, Platelets)</td><td>Virus slows marrow → platelet production drops</td><td>Very <strong>low platelets</strong> → bleeding</td></tr>
          <tr><td><strong>Blood Vessels</strong> 🔵</td><td>Carry blood safely without leakage</td><td>Virus weakens vessel walls → plasma leaks out</td><td>Blood pressure falls → organs don’t get oxygen → <strong>shock</strong></td></tr>
          <tr><td><strong>Spleen</strong> 🟣</td><td>Filters blood, removes old cells, supports immunity</td><td>Becomes overworked and swells up</td><td>Pain, rare risk of <strong>rupture and bleeding</strong></td></tr>
          <tr><td><strong>Brain</strong> 🟡</td><td>Controls body functions, memory, thinking</td><td>Sometimes swelling or small bleeding in brain tissue</td><td>Headache, confusion, seizures → <strong>unconsciousness</strong></td></tr>
          <tr><td><strong>Heart</strong> 💚</td><td>Pumps blood to whole body</td><td>Virus may weaken heart muscles (myocarditis)</td><td>Weak pumping → fatigue, chest pain, breathlessness</td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <section id="prevention" class="card">
    <h2>Prevention</h2>
    <ul>
      <li>Use mosquito repellents and nets</li>
      <li>Eliminate stagnant water</li>
      <li>Wear protective clothing</li>
      <li>Promote community awareness</li>
    </ul>
  </section>

  <section id="treatment" class="card">
    <h2>Treatment & Care</h2>
    <div class="table-wrap">
      <table class="treatment">
        <thead>
          <tr>
            <th>Type</th>
            <th>Treatment Step</th>
            <th>What It Means</th>
            <th>Why It Is Important</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>🏠 <strong>Home Remedies / Self-Care</strong></td><td><strong>Rest & Hydration</strong></td><td>Bed rest, drink lots of water, ORS, juices, coconut water</td><td>Prevents dehydration from fever and plasma leakage</td></tr>
          <tr><td></td><td><strong>Fever Control</strong></td><td>Take <strong>Paracetamol</strong> only (avoid aspirin/ibuprofen)</td><td>Controls fever safely without increasing bleeding risk</td></tr>
          <tr><td></td><td><strong>Nutrition</strong></td><td>Eat light, healthy food (fruits, porridge, vegetables, soups)</td><td>Helps recovery and boosts immunity</td></tr>
          <tr><td></td><td><strong>Monitoring at Home</strong></td><td>Check temperature, watch for warning signs</td><td>Detects early danger signs so hospital care can be given quickly</td></tr>
          <tr><td>🏥 <strong>Doctor / Hospital Care</strong></td><td><strong>Regular Blood Tests</strong></td><td>Platelet count & hematocrit monitoring</td><td>Detects risk of bleeding and shock early</td></tr>
          <tr><td></td><td><strong>IV Fluids</strong></td><td>Intravenous fluids if patient is dehydrated or in shock</td><td>Maintains blood pressure and hydration</td></tr>
          <tr><td></td><td><strong>Oxygen & Monitoring</strong></td><td>Patient kept under observation with oxygen support if needed</td><td>Prevents organ damage and shock</td></tr>
          <tr><td></td><td><strong>Platelet / Blood Transfusion</strong></td><td>Given only if platelets are very low or severe bleeding</td><td>Saves life in critical dengue cases</td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <section id="charts" class="card">
    <h2>Visuals — Charts</h2>
    <div class="charts-row">
      <div class="chart-box small"><canvas id="pieChart" width="400" height="300"></canvas></div>
      <div class="chart-box large"><canvas id="barChart" width="600" height="300"></canvas></div>
    </div>
    <div class="line-chart"><canvas id="lineChart" width="1000" height="200"></canvas></div>
    <div class="controls">
      <label for="yearSelect">Select Year:</label>
      <select id="yearSelect"></select>
    </div>
  </section>

  <section id="final" class="card center">
    <button id="endBtn" class="end-btn">DOT</button>
    <div id="goodbye" class="goodbye"><span>🦟 Take care of yourself</span></div>
  </section>
</main>

<footer class="site-footer"><p>© 2025 Dengue Awareness</p></footer>

<script src="data.js"></script>
<script>
document.querySelectorAll('.nav button').forEach(btn=>{
  btn.addEventListener('click',()=>{
    const id=btn.dataset.target;
    document.getElementById(id).scrollIntoView({behavior:'smooth'});
  });
});

// Mosquito motion
function animateMosquito(sel,speed,rx,ry,phase){
  const el=document.querySelector(sel);
  let t=phase;
  (function step(){
    t+=speed;
    const x=rx*Math.cos(t),y=ry*Math.sin(2*t);
    el.style.transform=`translate(${x}px,${y}px) rotate(${10*Math.sin(3*t)}deg)`;
    requestAnimationFrame(step);
  })();
}
animateMosquito('.mosq1',.01,60,15,0);
animateMosquito('.mosq2',.012,80,20,1.3);
animateMosquito('.mosq3',.009,50,12,2.1);

// Charts
const yearSelect=document.getElementById('yearSelect');
availableYears.forEach(y=>{
  const opt=document.createElement('option');
  opt.value=y; opt.textContent=y;
  yearSelect.appendChild(opt);
});
yearSelect.value=Math.max(...availableYears);

let pieChart,barChart,lineChart;
function drawAll(year){
  const entries=Object.keys(dengueDataAllStates).map(s=>({
    state:s,
    cases:dengueDataAllStates[s][year].cases,
    deaths:dengueDataAllStates[s][year].deaths
  }));
  entries.sort((a,b)=>b.cases-a.cases);
  const top10=entries.slice(0,10);
  const labels=top10.map(e=>e.state);
  const values=top10.map(e=>e.cases);

  const pctx=document.getElementById('pieChart').getContext('2d');
  if(pieChart) pieChart.destroy();
  pieChart=new Chart(pctx,{type:'pie',data:{
    labels:labels,
    datasets:[{data:values,backgroundColor:labels.map((_,i)=>`hsl(${i*36},70%,55%)`)}]},
    options:{plugins:{legend:{position:'bottom'}}}
  });

  const bctx=document.getElementById('barChart').getContext('2d');
  if(barChart) barChart.destroy();
  const sums=availableYears.map(y=>Object.values(dengueDataAllStates).reduce((a,s)=>a+s[y].cases,0));
  barChart=new Chart(bctx,{type:'bar',data:{labels:availableYears,datasets:[{label:'Total Cases',data:sums,backgroundColor:'rgba(46,204,113,0.7)'}]},
    options:{plugins:{legend:{display:false}},scales:{y:{title:{display:true,text:'Cases'}}}}
  });

  const lctx=document.getElementById('lineChart').getContext('2d');
  if(lineChart) lineChart.destroy();
  const deaths=availableYears.map(y=>Object.values(dengueDataAllStates).reduce((a,s)=>a+s[y].deaths,0));
  lineChart=new Chart(lctx,{type:'line',data:{labels:availableYears,datasets:[{label:'Deaths',data:deaths,borderColor:'#e74c3c',tension:0.3}]},
    options:{plugins:{legend:{display:false}},scales:{y:{title:{display:true,text:'Deaths'}}}}
  });
}
drawAll(yearSelect.value);
yearSelect.addEventListener('change',()=>drawAll(yearSelect.value));

// DOT button
const endBtn=document.getElementById('endBtn');
const goodbye=document.getElementById('goodbye');
endBtn.addEventListener('click',()=>{
  for(let i=0;i<3;i++){
    const el=document.createElement('img');
    el.src='mosquito.png.jpg';
    el.className='mosq fly'+i;
    document.body.appendChild(el);
    setTimeout(()=>el.classList.add('toCenter'),i*300);
    setTimeout(()=>{el.classList.add('fadeout');setTimeout(()=>el.remove(),2000);},5000);
  }
  goodbye.classList.add('show');
  setTimeout(()=>goodbye.classList.remove('show'),5500);
});
</script>
</body>
</html>
